{% extends "project/project.html" %}

{% load static %}

{% block title %}Project Identifiers - {{ project }}{% endblock %}

{% block local_js_top %}
<script type="text/javascript" src="{% static 'custom/js/cookie.js' %}"></script>
<script type="text/javascript" src="{% static 'project/js/dynamic-formset.js' %}"></script>
{% endblock %}

{% block local_js_bottom %}
<script type="text/javascript" src="{% static 'custom/js/enable-popover.js' %}"></script>
<script>disableAddButtons();</script>
{# Disable submission for non-submitting authors #}
{% if user != project.submitting_author %}
  <script type="text/javascript" src="{% static 'custom/js/disable-input.js' %}"></script>
{% endif %}
{% endblock %}

{% block main_content %}
<h2 class="form-signin-heading">4. Project Identifiers</h2>
<hr>
{% include 'about/identifiers.html' %}
<form action="{% url 'project_identifiers' project.slug %}" method="post" onsubmit="return validateItems('topic-list', 'description', 'Topics')">
  {% if user != project.submitting_author %}
  <div class="alert alert-form alert-warning alert-dismissible">
    <strong>Only the submitting author may edit the identifiers.</strong>
  </div>
  {% endif %}

  {% include "project/metadata_inline_form_snippet.html" with form=identifier_form %}
  {% include 'project/item_list.html' with item="publication" item_label=publication_formset.item_label formset=publication_formset form_name=publication_formset.form_name add_item_url=add_item_url remove_item_url=remove_item_url %}
  {% include 'project/item_list.html' with item="topic" item_label=topic_formset.item_label formset=topic_formset form_name=topic_formset.form_name add_item_url=add_item_url remove_item_url=remove_item_url %}
  <button class="btn btn-lg btn-primary" type="submit" name="edit_identifiers">Save Identifiers</button>
</form>
<br>

{% endblock %}
